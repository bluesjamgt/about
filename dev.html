<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Blu J | Dev Projects</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Noto+Serif+TC:wght@400;700&display=swap"
    rel="stylesheet">

  <script src="lang.js"></script>

  <style>
    body {
      font-family: 'Inter', sans-serif;
    }

    h1,
    h2,
    h3,
    .serif {
      font-family: 'Noto Serif TC', serif;
    }

    .no-scrollbar::-webkit-scrollbar {
      display: none;
    }

    .no-scrollbar {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }
  </style>
</head>

<body class="bg-stone-50 text-gray-800 antialiased overflow-x-hidden pb-20">

  <div id="navbar" class="sticky top-0 z-40"></div>

  <div
    class="fixed top-24 right-4 z-50 flex flex-col gap-2 bg-white/80 backdrop-blur p-2 rounded-lg shadow-sm text-xs border border-gray-100">
    <button id="btn-en" onclick="setLang('en')" class="lang-btn hover:text-indigo-600 transition">EN</button>
    <button id="btn-tw" onclick="setLang('tw')" class="lang-btn hover:text-indigo-600 transition">TW</button>
    <button id="btn-jp" onclick="setLang('jp')" class="lang-btn hover:text-indigo-600 transition">JP</button>
  </div>

  <main class="max-w-4xl mx-auto px-4 py-10 space-y-10">

    <div class="bg-white rounded-xl shadow p-6 space-y-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 flex items-center justify-center bg-purple-50 rounded-xl shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="w-7 h-7 text-purple-600">
              <path
                d="M2.7 10.3a2.41 2.41 0 0 0 0 3.41l7.59 7.59a2.41 2.41 0 0 0 3.41 0l7.59-7.59a2.41 2.41 0 0 0 0-3.41l-7.59-7.59a2.41 2.41 0 0 0-3.41 0Z" />
            </svg>
          </div>
          <h2 class="font-bold text-lg" data-i18n="dev_p0_title">PrismStem</h2>
        </div>
        <button disabled
          class="px-4 py-2 bg-gray-400 text-white rounded-lg cursor-not-allowed text-sm flex items-center gap-2 shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="w-4 h-4">
            <path
              d="M11.25 4.533A9.707 9.707 0 0 0 6 3a9.735 9.735 0 0 0-3.25.555.75.75 0 0 0-.5.707v14.25a.75.75 0 0 0 1 .707A8.237 8.237 0 0 1 6 18.75c1.995 0 3.823.707 5.25 1.886V4.533ZM12.75 20.636A8.214 8.214 0 0 1 18 18.75c.966 0 1.89.166 2.75.47a.75.75 0 0 0 1-.708V4.262a.75.75 0 0 0-.5-.707A9.735 9.735 0 0 0 18 3a9.707 9.707 0 0 0-5.25 1.533v16.103Z" />
          </svg>
          <span data-i18n="btn_view">View Project</span>
        </button>
      </div>
      <p class="text-gray-600" data-i18n="dev_p0_desc1">AI Audio Separation Workstation.</p>
      <p class="text-gray-600" data-i18n="dev_p0_desc2">Local-native stem separation workstation built for ultimate
        fidelity.</p>
      <hr class="my-4">
      <div class="relative w-full aspect-video rounded-lg shadow overflow-hidden bg-gray-100 group cursor-pointer"
        onclick="openModal('img/dev/prstm-1.jpg')">
        <img src="img/dev/prstm-1.jpg" alt="PrismStem"
          class="absolute inset-0 w-full h-full object-cover transition duration-300 group-hover:opacity-90">
      </div>
    </div>

    <div class="bg-white rounded-xl shadow p-6 space-y-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 flex items-center justify-center bg-red-50 rounded-xl shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="w-7 h-7 text-red-600">
              <path
                d="M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17" />
              <path d="m10 15 5-3-5-3z" />
            </svg>
          </div>
          <h2 class="font-bold text-lg" data-i18n="dev_p1_title">yt-dlp-gui</h2>
        </div>
        <a href="https://github.com/bluesjamgt/yt-dlp-gui" target="_blank"
          class="px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 text-sm flex items-center gap-2 shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
            <path
              d="M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.355a.75.75 0 10-1.09 1.03l3.25 3.5a.75.75 0 001.09 0l3.25-3.5a.75.75 0 00-1.09-1.03l-2.955 3.009V2.75z" />
            <path
              d="M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z" />
          </svg>
          <span data-i18n="btn_github">GitHub</span>
        </a>
      </div>
      <p class="text-gray-600" data-i18n="dev_p1_desc1">A modern, cross-platform GUI wrapper for the powerful yt-dlp
        tool.</p>
      <p class="text-gray-600" data-i18n="dev_p1_desc2">Download videos effortlessly with a clean, user-friendly
        interface.</p>
      <hr class="my-4">
      <div class="relative w-full aspect-video rounded-lg shadow overflow-hidden bg-gray-100 group cursor-pointer"
        onclick="openModal('img/dev/ytdlp-1.jpg')">
        <img src="img/dev/ytdlp-1.jpg" alt="yt-dlp-gui screenshot"
          class="absolute inset-0 w-full h-full object-contain bg-black transition duration-300 group-hover:opacity-90">
      </div>
    </div>

    <div class="bg-white rounded-xl shadow p-6 space-y-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 flex items-center justify-center bg-blue-50 rounded-xl shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="w-7 h-7 text-blue-600">
              <path
                d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z" />
              <path d="m9 13 2 2 4-4" />
            </svg>
          </div>
          <h2 class="font-bold text-lg" data-i18n="dev_p2_title">FileProsApp</h2>
        </div>
        <a href="https://github.com/bluesjamgt/FileProsApp" target="_blank"
          class="px-4 py-2 bg-gray-800 text-white rounded-lg hover:bg-gray-700 text-sm flex items-center gap-2 shrink-0">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4">
            <path
              d="M10.75 2.75a.75.75 0 00-1.5 0v8.614L6.295 8.355a.75.75 0 10-1.09 1.03l3.25 3.5a.75.75 0 001.09 0l3.25-3.5a.75.75 0 00-1.09-1.03l-2.955 3.009V2.75z" />
            <path
              d="M3.5 12.75a.75.75 0 00-1.5 0v2.5A2.75 2.75 0 004.75 18h10.5A2.75 2.75 0 0018 15.25v-2.5a.75.75 0 00-1.5 0v2.5c0 .69-.56 1.25-1.25 1.25H4.75c-.69 0-1.25-.56-1.25-1.25v-2.5z" />
          </svg>
          <span data-i18n="btn_github">GitHub</span>
        </a>
      </div>
      <p class="text-gray-600" data-i18n="dev_p2_desc1">Automated file organization tool based on Python.</p>
      <p class="text-gray-600" data-i18n="dev_p2_desc2">Intelligently sort chaos into order with one click.</p>
      <hr class="my-4">
      <div class="relative w-full aspect-video rounded-lg shadow overflow-hidden bg-gray-100 group cursor-pointer"
        onclick="openModal('img/dev/fileproapp-1.jpg')">
        <img src="img/dev/fileproapp-1.jpg" alt="screenshot"
          class="absolute inset-0 w-full h-full object-cover transition duration-300 group-hover:opacity-90">
      </div>
    </div>

    <div class="bg-white rounded-xl shadow p-6 space-y-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 flex items-center justify-center bg-green-50 rounded-xl shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="w-7 h-7 text-green-600">
              <path d="M12 6V2H8" />
              <path d="m8 18-4 4V8a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2Z" />
              <path d="M2 12h2" />
              <path d="M9 11v2" />
              <path d="M15 11v2" />
              <path d="M20 12h2" />
            </svg>
          </div>
          <h2 class="font-bold text-lg" data-i18n="dev_p3_title">ChatBot Base in Dify</h2>
        </div>
        <button onclick="toggleChat()"
          class="px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 text-sm flex items-center gap-2 shrink-0 cursor-pointer transition">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z">
            </path>
          </svg>
          <span data-i18n="btn_chat">Let's Chat</span>
        </button>
      </div>
      <p class="text-gray-600" data-i18n="dev_p3_desc1">RAG Precision Data Integration.</p>
      <p class="text-gray-600" data-i18n="dev_p3_desc2">Intelligent Chat Agent designed for smart interactions.</p>
      <hr class="my-4">
      <div class="relative w-full aspect-video rounded-lg shadow overflow-hidden bg-gray-100 group cursor-pointer"
        onclick="openModal('img/dev/difyagent-1.jpg')">
        <img src="img/dev/difyagent-1.jpg" alt="screenshot"
          class="absolute inset-0 w-full h-full object-cover transition duration-300 group-hover:opacity-90">
      </div>
    </div>

    <div class="bg-white rounded-xl shadow p-6 space-y-4">
      <div class="flex items-center justify-between">
        <div class="flex items-center gap-4">
          <div class="w-12 h-12 flex items-center justify-center bg-indigo-50 rounded-xl shrink-0">
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
              stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
              class="w-7 h-7 text-indigo-600">
              <rect width="18" height="18" x="3" y="3" rx="2" ry="2" />
              <line x1="3" x2="21" y1="9" y2="9" />
              <path d="m9 16 3-3 3 3" />
            </svg>
          </div>
          <h2 class="font-bold text-lg" data-i18n="dev_p4_title">Brand Page Design</h2>
        </div>
        <a href="https://gunpowdermetal.com/" target="_blank"
          class="px-4 py-2 bg-gray-900 text-white rounded-lg hover:bg-gray-700 text-sm flex items-center gap-2 shrink-0">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z">
            </path>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z">
            </path>
          </svg>
          <span data-i18n="btn_view">View</span>
        </a>
      </div>
      <p class="text-gray-600" data-i18n="dev_p4_desc1">Modern aesthetic UI/UX implementation.</p>
      <p class="text-gray-600" data-i18n="dev_p4_desc2">Responsive design for GunPowder & Personal Branding.</p>
      <hr class="my-4">
      <div class="relative w-full aspect-video rounded-lg shadow overflow-hidden bg-gray-100 group cursor-pointer"
        onclick="openModal('./img/dev/BrandView-01.jpg')">
        <img src="./img/dev/BrandView-01.jpg" alt="screenshot"
          class="absolute inset-0 w-full h-full object-cover transition duration-300 group-hover:opacity-90">
      </div>
    </div>

  </main>

  <footer class="border-t border-gray-200 py-8 mt-10">
    <div
      class="max-w-4xl mx-auto px-4 flex flex-col-reverse md:flex-row justify-between items-center gap-4 text-xs text-gray-500">

      <span data-i18n="footer_copy">© 2025 Blu J</span>

      <div class="flex items-center gap-6">

        <a href="https://www.instagram.com/bluzjamgt/" target="_blank"
          class="hover:text-gray-900 transition duration-300" aria-label="Instagram">
          <svg fill="currentColor" class="w-4 h-4" viewBox="0 0 24 24">
            <path
              d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.069-4.85.069-3.204 0-3.584-.011-4.849-.069-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" />
          </svg>
        </a>

        <a href="https://www.youtube.com/@bluesjamgt/channels" target="_blank"
          class="hover:text-gray-900 transition duration-300" aria-label="YouTube">
          <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 24 24">
            <path
              d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z" />
          </svg>
        </a>

        <a href="mailto:bluesjamgt@gmail.com" class="hover:text-gray-900 transition duration-300" aria-label="Email">
          <svg fill="currentColor" class="w-5 h-5" viewBox="0 0 24 24">
            <path
              d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z" />
          </svg>
        </a>

      </div>
    </div>
  </footer>

  <div id="dify-chat-container"
    class="fixed bottom-4 right-4 z-50 hidden transition-all duration-300 transform scale-95 opacity-0 origin-bottom-right">

    <div id="chat-box"
      class="relative bg-white w-[90vw] md:w-[400px] h-[500px] md:h-[600px] rounded-2xl shadow-2xl border border-gray-200 flex flex-col overflow-hidden min-w-[320px] min-h-[450px] max-w-[95vw] max-h-[90vh]">

      <div id="resize-handle"
        class="absolute top-0 left-0 w-6 h-6 z-50 cursor-nw-resize flex items-center justify-center group">
        <div class="w-full h-full rounded-tl-xl bg-transparent group-hover:bg-gray-300/50 transition-colors"></div>
        <div
          class="absolute top-1 left-1 border-t-2 border-l-2 border-gray-300 w-3 h-3 rounded-tl-lg pointer-events-none opacity-0 group-hover:opacity-100 transition-opacity">
        </div>
      </div>

      <div
        class="bg-gray-50 border-b border-gray-100 p-3 pl-8 flex justify-between items-center shrink-0 cursor-move select-none">
        <span class="text-sm font-bold text-gray-700 flex items-center gap-2">
          <span class="w-2 h-2 bg-green-500 rounded-full animate-pulse"></span>
          ChatBot
        </span>
        <button onclick="toggleChat()"
          class="text-gray-400 hover:text-gray-600 hover:bg-gray-200 rounded-full p-1 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd"
              d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
              clip-rule="evenodd" />
          </svg>
        </button>
      </div>

      <iframe id="chat-iframe" src="https://agent.runnersblue.com/chat/l4efmNDn5OXKCooP"
        class="w-full h-full border-none bg-gray-50"></iframe>
    </div>
  </div>

  <!-- Windowed Modal -->
  <div id="image-modal"
    class="fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm hidden flex items-center justify-center p-4 opacity-0 transition-opacity duration-300"
    onclick="closeModal()">

    <!-- Modal Window (80% Width) -->
    <div
      class="bg-white rounded-xl shadow-2xl w-[80%] max-h-[90vh] flex flex-col overflow-hidden relative transform scale-95 transition-transform duration-300"
      id="modal-window" onclick="event.stopPropagation()">

      <!-- Header / Controls -->
      <div class="bg-gray-50 border-b border-gray-100 px-4 py-2 flex justify-end shrink-0">
        <button onclick="closeModal()"
          class="text-gray-400 hover:text-gray-700 hover:bg-gray-200 rounded-lg p-1 transition">
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
          </svg>
        </button>
      </div>

      <!-- Image Area -->
      <div class="flex-1 overflow-auto bg-gray-100 flex items-center justify-center p-4">
        <img id="modal-img" src="" alt="Project Preview" class="max-w-full max-h-full object-contain shadow-sm rounded">
      </div>

      <!-- Resize Handle -->
      <div id="modal-resize-handle"
        class="absolute bottom-0 right-0 w-6 h-6 cursor-nwse-resize z-50 group flex items-end justify-end p-1">
        <svg class="w-4 h-4 text-gray-400 group-hover:text-gray-600 transition" fill="none" viewBox="0 0 24 24"
          stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 21h9m0 0v-9m0 9l-9-9" />
        </svg>
      </div>

    </div>
  </div>

  <script>
    // 0. Image Modal Logic
    const imageModal = document.getElementById('image-modal');
    const modalWindow = document.getElementById('modal-window');
    const modalImg = document.getElementById('modal-img');

    // Resize Logic Vars
    const resizeHandle = document.getElementById('modal-resize-handle');
    let isModalResizing = false;
    let modalStartX, modalStartY, modalStartW, modalStartH, modalStartLeft, modalStartTop;

    function openModal(src) {
      modalImg.src = src;
      imageModal.classList.remove('hidden');

      // Reset styles for clean centered opening
      modalWindow.style.position = '';
      modalWindow.style.left = '';
      modalWindow.style.top = '';
      modalWindow.style.width = '';
      modalWindow.style.height = '';
      modalWindow.style.margin = '';

      // Animation frame for transition
      requestAnimationFrame(() => {
        imageModal.classList.remove('opacity-0');
        modalWindow.classList.remove('scale-95');
        modalWindow.classList.add('scale-100');
      });
      document.body.style.overflow = 'hidden';
    }

    function closeModal() {
      imageModal.classList.add('opacity-0');
      modalWindow.classList.remove('scale-100');
      modalWindow.classList.add('scale-95');

      setTimeout(() => {
        imageModal.classList.add('hidden');
        modalImg.src = '';
      }, 300);
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && !imageModal.classList.contains('hidden')) {
        closeModal();
      }
    });

    // Modal Resize Event Listeners
    resizeHandle.addEventListener('mousedown', (e) => {
      e.stopPropagation(); // Prevent closing modal
      e.preventDefault();
      isModalResizing = true;

      const rect = modalWindow.getBoundingClientRect();
      modalStartX = e.clientX;
      modalStartY = e.clientY;
      modalStartW = rect.width;
      modalStartH = rect.height;
      modalStartLeft = rect.left;
      modalStartTop = rect.top;

      // Switch to absolute positioning to allow resizing
      modalWindow.style.position = 'absolute';
      modalWindow.style.left = `${modalStartLeft}px`;
      modalWindow.style.top = `${modalStartTop}px`;
      modalWindow.style.width = `${modalStartW}px`;
      modalWindow.style.height = `${modalStartH}px`;
      modalWindow.style.margin = '0';

      // Disable transitions during resize
      modalWindow.style.transition = 'none';
      document.body.style.userSelect = 'none';
    });

    document.addEventListener('mousemove', (e) => {
      if (!isModalResizing) return;

      const dx = e.clientX - modalStartX;
      const dy = e.clientY - modalStartY;

      // Enforce minimum size
      const newWidth = Math.max(300, modalStartW + dx);
      const newHeight = Math.max(200, modalStartH + dy);

      modalWindow.style.width = `${newWidth}px`;
      modalWindow.style.height = `${newHeight}px`;
    });

    document.addEventListener('mouseup', () => {
      if (isModalResizing) {
        isModalResizing = false;
        // Re-enable transitions (optional, but good if we animate later)
        modalWindow.style.transition = '';
        document.body.style.userSelect = '';
      }
    });

    // 1. 聊天室開關
    function toggleChat() {
      const chatContainer = document.getElementById('dify-chat-container');

      if (chatContainer.classList.contains('hidden')) {
        chatContainer.classList.remove('hidden');
        setTimeout(() => {
          chatContainer.classList.remove('scale-95', 'opacity-0');
          chatContainer.classList.add('scale-100', 'opacity-100');
        }, 10);
      } else {
        chatContainer.classList.remove('scale-100', 'opacity-100');
        chatContainer.classList.add('scale-95', 'opacity-0');
        setTimeout(() => {
          chatContainer.classList.add('hidden');
        }, 300);
      }
    }

    // 2. 左上角拉伸邏輯 (Resizer)
    document.addEventListener('DOMContentLoaded', () => {
      const handle = document.getElementById('resize-handle');
      const box = document.getElementById('chat-box');
      const iframe = document.getElementById('chat-iframe');
      let isResizing = false;
      let startX, startY, startWidth, startHeight;

      if (!handle || !box) return;

      handle.addEventListener('mousedown', (e) => {
        isResizing = true;
        // 記錄起始點
        startX = e.clientX;
        startY = e.clientY;
        startWidth = parseInt(document.defaultView.getComputedStyle(box).width, 10);
        startHeight = parseInt(document.defaultView.getComputedStyle(box).height, 10);

        // 鎖定 iframe 與文字選取，避免拖曳卡頓
        iframe.style.pointerEvents = 'none';
        document.body.style.userSelect = 'none';
      });

      document.addEventListener('mousemove', (e) => {
        if (!isResizing) return;

        // 計算變化量：往左移(X減小) = 寬度增加 / 往上移(Y減小) = 高度增加
        const dx = startX - e.clientX;
        const dy = startY - e.clientY;

        box.style.width = `${startWidth + dx}px`;
        box.style.height = `${startHeight + dy}px`;
      });

      document.addEventListener('mouseup', () => {
        if (isResizing) {
          isResizing = false;
          // 恢復互動
          iframe.style.pointerEvents = 'auto';
          document.body.style.userSelect = 'auto';
        }
      });
    });
  </script>

</body>

</html>